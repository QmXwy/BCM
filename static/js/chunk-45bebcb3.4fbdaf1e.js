(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45bebcb3"],{"0ccb":function(t,e,n){var i=n("50c4"),a=n("1148"),o=n("1d80"),s=Math.ceil,r=function(t){return function(e,n,r){var l,c,u=String(o(e)),d=u.length,f=void 0===r?" ":String(r),m=i(n);return m<=d||""==f?u:(l=m-d,c=a.call(f,s(l/f.length)),c.length>l&&(c=c.slice(0,l)),t?u+c:c+u)}};t.exports={start:r(!1),end:r(!0)}},1:function(t,e){},2:function(t,e){},"28b1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"opera-button"},[n("el-button",{attrs:{type:"primary"},on:{click:t.add_data}},[t._v("添加公司方案")])],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"table-div",attrs:{id:t.tableId,"element-loading-text":"Loading"}},[n("el-table",{attrs:{data:t.list,border:"",fit:"","highlight-current-row":"","max-height":t.tableHeight,"header-cell-style":t.headerCellStyle}},[n("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),n("el-table-column",{attrs:{label:"方案名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.createTime||"-")+" ")]}}])}),n("el-table-column",{attrs:{label:"修改时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.updateTime||"-")+" ")]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"success"},on:{click:function(n){return t.edit_data(e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.delete_data(e.row)}}},[t._v("删除")])]}}])})],1)],1),n("el-dialog",{attrs:{title:"edit"===t.showType?"编辑方案":"添加方案",visible:t.show,"show-close":!1,width:"768px"},on:{"update:visible":function(e){t.show=e}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showLoading,expression:"showLoading"}],staticClass:"from"},[n("el-form",{attrs:{model:t.form,"label-width":"80px",size:"mini"},on:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"方案名称"}},[n("el-input",{staticStyle:{width:"204px","margin-right":"10px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:t.add_list_item}},[t._v("添加公司")]),n("el-upload",{staticClass:"icon-uploader",attrs:{action:"","auto-upload":!1,accept:".xls,.xlsx","show-file-list":!1,"on-change":t.uploadExcel}},[n("el-button",{attrs:{type:"success",icon:"el-icon-upload2"}},[t._v("批量上传")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.form.list,border:"",fit:"","highlight-current-row":"",height:"354",size:"mini","row-class-name":t.tableRowClassName}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"单位名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{size:"mini"},model:{value:e.row.name,callback:function(n){t.$set(e.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{label:"单位报价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{size:"mini"},model:{value:e.row.price,callback:function(n){t.$set(e.row,"price",n)},expression:"scope.row.price"}})]}}])}),n("el-table-column",{attrs:{label:"是否首次进入",align:"center",width:"90px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",size:"mini"},model:{value:e.row.white,callback:function(n){t.$set(e.row,"white",n)},expression:"scope.row.white"}})]}}])}),n("el-table-column",{attrs:{label:"资信分",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{size:"mini"},model:{value:e.row.credit,callback:function(n){t.$set(e.row,"credit",n)},expression:"scope.row.credit"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.delete_list_item(e.row)}}},[t._v("删除")])]}}])})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{disabled:t.showLoading,size:"mini"},on:{click:function(e){t.show=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",disabled:t.showLoading,size:"mini"},on:{click:t.save_data}},[t._v("确 定")])],1)])],1)},a=[],o=(n("99af"),n("d81d"),n("fb6a"),n("a434"),n("b0c0"),n("e9c4"),n("b64b"),n("d3b7"),n("25f0"),n("4d90"),n("a002")),s=n.n(o),r=n("1146"),l=n.n(r),c=n("8941"),u={data:function(){return{list:[],listLoading:!1,show:!1,form:{},showLoading:!1,showType:"",tableHeight:0,tableId:"company_table"}},created:function(){this.fetchData()},mounted:function(){this.observer=Object(c["b"])(this.tableId,this.calHeight)},beforeDestroy:function(){Object(c["c"])(this.observer)},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return!0===e.white?"success-row":""},headerCellStyle:c["a"],calHeight:function(t){this.tableHeight=t},fetchData:function(){var t=this;this.listLoading=!0,s.a.getItem("_company").then((function(e){t.listLoading=!1,t.list=e||[]})).catch((function(e){t.$message.error(e.message),t.listLoading=!1,t.list=[]}))},add_data:function(){this.form={},this.showType="add",this.show=!0},edit_data:function(t){this.form=JSON.parse(JSON.stringify(t)),this.showType="edit",this.show=!0},save_data:function(){var t=this;if(this.form.name)if(0!==this.form.list.length){for(var e=!0,n=0;n<this.form.list.length;n++)if(!this.form.list[n].name||!this.form.list[n].price||!1!==this.form.list[n].white&&!0!==this.form.list[n].white||""===this.form.list[n].credit){this.$message.error("公司参数不可为空！"),e=!1;break}if(!1!==e)if(this.showLoading=!0,"add"===this.showType){var i="company_"+(new Date).getTime();setTimeout((function(){s.a.getItem("_company").then((function(e){var n=e||[];t.form.id=i,t.form.createTime=t.getCurrentDateTime(),n.unshift(t.form),s.a.setItem("_company",n).then((function(){t.$message.success("添加成功！"),t.show=!1,t.showLoading=!1,t.fetchData()}))}))}),1e3)}else setTimeout((function(){s.a.getItem("_company").then((function(e){var n=e||[],i="";t.form.updateTime=t.getCurrentDateTime(),n.map((function(e,n){e.id===t.form.id&&(i=n)})),""!==t.idIndex&&(n[i]=t.form,s.a.setItem("_company",n).then((function(){t.$message.success("修改成功！"),t.show=!1,t.showLoading=!1,t.fetchData()})))}))}),1e3)}else this.$message.error("投标单位列表不能为空！");else this.$message.error("方案名称错误！")},delete_data:function(t){var e=this;s.a.getItem("_bid").then((function(n){var i=!1,a=n||[];a.map((function(e){e.company===t.id&&(i=!0)})),i?e.$message.error("计算方案正在使用！"):e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.listLoading=!0,s.a.getItem("_company").then((function(n){var i=n||[],a="";i.map((function(e,n){e.id===t.id&&(a=n)})),""!==a&&(i.splice(a,1),s.a.setItem("_company",i).then((function(){e.$message.success("删除成功！"),e.fetchData()})))}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}))},add_list_item:function(){var t=this;this.showLoading=!0;var e=this.form.list||[],n="company_"+(new Date).getTime();setTimeout((function(){e.unshift({id:n,name:"",price:"",white:!0,credit:""}),t.$set(t.form,"list",e),t.showLoading=!1}),200)},delete_list_item:function(t){var e=this.form.list||[],n="";e.map((function(e,i){e.id===t.id&&(n=i)})),""!==n&&e.splice(n,1),this.$set(this.form,"list",e)},getCurrentDateTime:function(){var t=new Date,e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),a=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0"),s=t.getSeconds().toString().padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(i," ").concat(a,":").concat(o,":").concat(s)},uploadExcel:function(t){var e=this,n=t.name.slice(t.name.lastIndexOf(".")),i=[".xlsx",".xls"].some((function(t){return t===n}));if(i){var a="company_"+(new Date).getTime();this.file2Xce(t).then((function(t){var n=[];t.map((function(t,e){var i={id:a+e,name:t["投标单位"]||"",price:String(t["投标报价"])||"",white:"1"===String(t["是否首次进入"]),credit:String(t["资信分"])||""};n.push(i)})),e.$set(e.form,"list",n)}))}else this.$message("格式错误！请重新导入")},file2Xce:function(t){var e=this;return new Promise((function(n){var i=new FileReader;i.onload=function(t){var i=t.target.result;e.excelData=l.a.read(i,{type:"binary"});var a=e.excelData.SheetNames[0],o=l.a.utils.sheet_to_json(e.excelData.Sheets[a]);n(o)},i.readAsBinaryString(t.raw)}))}}},d=u,f=(n("6235"),n("2877")),m=Object(f["a"])(d,i,a,!1,null,"5da7248d",null);e["default"]=m.exports},3:function(t,e){},"4d90":function(t,e,n){"use strict";var i=n("23e7"),a=n("0ccb").start,o=n("9a0c");i({target:"String",proto:!0,forced:o},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},6235:function(t,e,n){"use strict";n("a117")},8941:function(t,e,n){"use strict";function i(t){if(t)try{t.disconnect(),t=null}catch(e){console.log(e),t=null}}function a(t,e){var n=function(t,e){var n=null;return function(){var i=this;null!==n&&clearTimeout(n),n=setTimeout((function(){t.call(i)}),e)}},i=document.getElementById(t),a=function(){var t=i.getBoundingClientRect().height;e(t)},o=new ResizeObserver(n(a,200));return o.observe(i,{box:"border-box"}),o}function o(){return"background:#F3F7FF;color:#333333;font-weight:700;text-align: center;"}n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o}))},"9a0c":function(t,e,n){var i=n("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},a117:function(t,e,n){}}]);