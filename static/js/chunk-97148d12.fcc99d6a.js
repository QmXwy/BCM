(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97148d12"],{"0ccb":function(e,t,a){var n=a("50c4"),i=a("1148"),l=a("1d80"),r=Math.ceil,o=function(e){return function(t,a,o){var s,c,u=String(l(t)),f=u.length,d=void 0===o?" ":String(o),m=n(a);return m<=f||""==d?u:(s=m-f,c=i.call(d,r(s/d.length)),c.length>s&&(c=c.slice(0,s)),e?u+c:c+u)}};e.exports={start:o(!1),end:o(!0)}},1148:function(e,t,a){"use strict";var n=a("a691"),i=a("1d80");e.exports="".repeat||function(e){var t=String(i(this)),a="",l=n(e);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(a+=t);return a}},"4d90":function(e,t,a){"use strict";var n=a("23e7"),i=a("0ccb").start,l=a("9a0c");n({target:"String",proto:!0,forced:l},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},8941:function(e,t,a){"use strict";function n(e){if(e)try{e.disconnect(),e=null}catch(t){console.log(t),e=null}}function i(e,t){var a=function(e,t){var a=null;return function(){var n=this;null!==a&&clearTimeout(a),a=setTimeout((function(){e.call(n)}),t)}},n=document.getElementById(e),i=function(){var e=n.getBoundingClientRect().height;t(e)},l=new ResizeObserver(a(i,200));return l.observe(n,{box:"border-box"}),l}function l(){return"background:#F3F7FF;color:#333333;font-weight:700;text-align: center;"}a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}))},"9a0c":function(e,t,a){var n=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},a434:function(e,t,a){"use strict";var n=a("23e7"),i=a("23cb"),l=a("a691"),r=a("50c4"),o=a("7b0b"),s=a("65f0"),c=a("8418"),u=a("1dde"),f=a("ae40"),d=u("splice"),m=f("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var a,n,u,f,d,m,v=o(this),_=r(v.length),w=i(e,_),y=arguments.length;if(0===y?a=n=0:1===y?(a=0,n=_-w):(a=y-2,n=p(g(l(t),0),_-w)),_+a-n>b)throw TypeError(h);for(u=s(v,n),f=0;f<n;f++)d=w+f,d in v&&c(u,f,v[d]);if(u.length=n,a<n){for(f=w;f<_-n;f++)d=f+n,m=f+a,d in v?v[m]=v[d]:delete v[m];for(f=_;f>_-n+a;f--)delete v[f-1]}else if(a>n)for(f=_-n;f>w;f--)d=f+n-1,m=f+a-1,d in v?v[m]=v[d]:delete v[m];for(f=0;f<a;f++)v[f+w]=arguments[f+2];return v.length=_-n+a,u}})},ad7f:function(e,t,a){"use strict";a("d781")},d781:function(e,t,a){},e652:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"opera-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.add_data}},[e._v("添加计算方案")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"table-div",attrs:{id:e.tableId,"element-loading-text":"Loading"}},[a("el-table",{attrs:{data:e.list,"max-height":e.tableHeight,"header-cell-style":e.headerCellStyle,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),a("el-table-column",{attrs:{label:"方案名称",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),a("el-table-column",{attrs:{label:"E1(>基准价)",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.e1Value)+" ")]}}])}),a("el-table-column",{attrs:{label:"E2(<=基准价)",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.e2Value)+" ")]}}])}),a("el-table-column",{attrs:{label:"F(满分值)",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fValue)+" ")]}}])}),a("el-table-column",{attrs:{label:"公司方案",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("nameFilter")({id:t.row.company,data:e.company_list}))+" ")]}}])}),a("el-table-column",{attrs:{label:"系数方案",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("nameFilter")({id:t.row.coefficient,data:e.coefficient_list}))+" ")]}}])}),a("el-table-column",{attrs:{label:"B值方案",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("nameFilter")({id:t.row.bValue,data:e.bValue_list}))+" ")]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.createTime||"-")+" ")]}}])}),a("el-table-column",{attrs:{label:"修改时间",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.updateTime||"-")+" ")]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center","min-width":"200px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.desc||"-")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.edit_data(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.delete_data(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"edit"===e.showType?"编辑方案":"添加方案",visible:e.show,"show-close":!1,width:"768px"},on:{"update:visible":function(t){e.show=t}}},[e.show?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticClass:"from"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,size:"mini"},on:{submit:function(e){e.preventDefault()}}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"方案名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投标限价",prop:"priceLimit"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.priceLimit,callback:function(t){e.$set(e.form,"priceLimit",t)},expression:"form.priceLimit"}})],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"E1(>基准价)",prop:"e1Value"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini","allow-create":"",filterable:"",placeholder:"",clearable:""},model:{value:e.form.e1Value,callback:function(t){e.$set(e.form,"e1Value",t)},expression:"form.e1Value"}},e._l(e.optionsE,(function(e){return a("el-option",{key:e.value,attrs:{size:"mini",label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"E2(<=基准价)",prop:"e2Value"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini","allow-create":"",filterable:"",placeholder:"",clearable:""},model:{value:e.form.e2Value,callback:function(t){e.$set(e.form,"e2Value",t)},expression:"form.e2Value"}},e._l(e.optionsE,(function(e){return a("el-option",{key:e.value,attrs:{size:"mini",label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"F(满分值)",prop:"fValue"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini","allow-create":"",filterable:"",placeholder:"",clearable:""},model:{value:e.form.fValue,callback:function(t){e.$set(e.form,"fValue",t)},expression:"form.fValue"}},e._l(e.optionsF,(function(e){return a("el-option",{key:e.value,attrs:{size:"mini",label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投标公司",prop:"company"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",filterable:"",placeholder:"请选择投标公司",clearable:""},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}},e._l(e.company_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"系数方案",prop:"coefficient"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",filterable:"",placeholder:"请选择系数方案",clearable:""},model:{value:e.form.coefficient,callback:function(t){e.$set(e.form,"coefficient",t)},expression:"form.coefficient"}},e._l(e.coefficient_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"B值方案",prop:"bValue"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",filterable:"",placeholder:"请选择B值方案",clearable:""},model:{value:e.form.bValue,callback:function(t){e.$set(e.form,"bValue",t)},expression:"form.bValue"}},e._l(e.bValue_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"方案备注",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",rows:4,resize:"none"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)],1)],1):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:e.showLoading,size:"mini"},on:{click:function(t){e.show=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.showLoading,size:"mini"},on:{click:e.save_data}},[e._v("确 定")])],1)])],1)},i=[],l=(a("99af"),a("d81d"),a("a434"),a("b0c0"),a("e9c4"),a("b64b"),a("d3b7"),a("25f0"),a("3ca3"),a("4d90"),a("ddb0"),a("a002")),r=a.n(l),o=a("8941"),s={filters:{nameFilter:function(e){var t="-",a=e.data||[];return a.map((function(a){a.id===e.id&&(t=a.name)})),t}},data:function(){return{list:[],listLoading:!1,show:!1,form:{},showLoading:!1,showType:"",coefficient_list:[],bValue_list:[],company_list:[],rules:{name:[{required:!0,message:"请输入！",trigger:"change"}],priceLimit:[{required:!0,message:"请输入！",trigger:"change"}],fValue:[{required:!0,message:"请输入！",trigger:"change"}],e1Value:[{required:!0,message:"请输入！",trigger:"change"}],e2Value:[{required:!0,message:"请输入！",trigger:"change"}],company:[{required:!0,message:"请选择！",trigger:"change"}],coefficient:[{required:!0,message:"请选择！",trigger:"change"}],bValue:[{required:!0,message:"请选择！",trigger:"change"}]},tableHeight:0,tableId:"bid_table",optionsE:[],optionsF:[{value:"80",label:"80"},{value:"85",label:"85"},{value:"88",label:"88"},{value:"88.5",label:"88.5"},{value:"90",label:"90"},{value:"95",label:"95"},{value:"98",label:"98"},{value:"98.5",label:"98.5"},{value:"100",label:"100"}]}},created:function(){for(var e=[],t=10;t<=30;t+=1){var a={value:String(t/10),label:1===String(t/10).length?String(t/10)+".0":String(t/10)};e.push(a)}this.optionsE=e,this.fetchData()},mounted:function(){this.observer=Object(o["b"])(this.tableId,this.calHeight)},beforeDestroy:function(){Object(o["c"])(this.observer)},methods:{headerCellStyle:o["a"],calHeight:function(e){this.tableHeight=e},fetchData:function(){var e=this;this.listLoading=!0,r.a.getItem("_bid").then((function(t){Promise.all([e.get_bValue(),e.get_coefficient(),e.get_company()]).then((function(){e.listLoading=!1,e.list=t||[]})).catch((function(t){e.$message.error(t.message),e.listLoading=!1,e.list=[]}))})).catch((function(t){e.$message.error(t.message),e.listLoading=!1,e.list=[]}))},get_company:function(){var e=this;return new Promise((function(t,a){r.a.getItem("_company").then((function(a){e.company_list=a||[],t()})).catch((function(a){e.list=[],t(a)}))}))},get_bValue:function(){var e=this;return new Promise((function(t,a){r.a.getItem("_bValue").then((function(a){e.bValue_list=a||[],t()})).catch((function(a){e.list=[],t(a)}))}))},get_coefficient:function(){var e=this;return new Promise((function(t,a){r.a.getItem("_coefficient").then((function(a){e.coefficient_list=a||[],t()})).catch((function(a){e.list=[],t(a)}))}))},add_data:function(){this.form={},this.showType="add",this.show=!0},edit_data:function(e){this.form=JSON.parse(JSON.stringify(e)),this.showType="edit",this.show=!0},save_data:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;if(e.showLoading=!0,"add"===e.showType){var a="bid_"+(new Date).getTime();setTimeout((function(){r.a.getItem("_bid").then((function(t){var n=t||[];e.form.id=a,e.form.createTime=e.getCurrentDateTime(),n.unshift(e.form),r.a.setItem("_bid",n).then((function(){e.$message.success("添加成功！"),e.show=!1,e.showLoading=!1,e.fetchData()}))}))}),1e3)}else setTimeout((function(){r.a.getItem("_bid").then((function(t){var a=t||[],n="";e.form.updateTime=e.getCurrentDateTime(),a.map((function(t,a){t.id===e.form.id&&(n=a)})),""!==e.idIndex&&(a[n]=e.form,r.a.setItem("_bid",a).then((function(){e.$message.success("修改成功！"),e.show=!1,e.showLoading=!1,e.fetchData()})))}))}),1e3)}))},delete_data:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.listLoading=!0,r.a.getItem("_bid").then((function(a){var n=a||[],i="";n.map((function(t,a){t.id===e.id&&(i=a)})),""!==i&&(n.splice(i,1),r.a.setItem("_bid",n).then((function(){t.$message.success("删除成功！"),t.fetchData()})))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getCurrentDateTime:function(){var e=new Date,t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0"),r=e.getSeconds().toString().padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(n," ").concat(i,":").concat(l,":").concat(r)}}},c=s,u=(a("ad7f"),a("2877")),f=Object(u["a"])(c,n,i,!1,null,"0e4bcb21",null);t["default"]=f.exports},e9c4:function(e,t,a){var n=a("23e7"),i=a("d066"),l=a("d039"),r=i("JSON","stringify"),o=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(e,t,a){var n=a.charAt(t-1),i=a.charAt(t+1);return s.test(e)&&!c.test(i)||c.test(e)&&!s.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},f=l((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&n({target:"JSON",stat:!0,forced:f},{stringify:function(e,t,a){var n=r.apply(null,arguments);return"string"==typeof n?n.replace(o,u):n}})}}]);